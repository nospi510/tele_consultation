<!DOCTYPE html PUBLIC "-//HbbTV//1.1.1//EN" "http://www.hbbtv.org/dtd/HbbTV-1.1.1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="application/vnd.hbbtv.xhtml+xml; charset=utf-8" />
    <title>Dr Santé - Téléconsultation</title>
    <link rel="stylesheet" href="assets/styles.css" />
    <script type="text/javascript" src="scripts/main.js"></script>
</head>
<body onload="initApp();">
    <!-- Gestionnaire HbbTV -->
    <div>
        <object type="application/oipfApplicationManager" id="applicationManager"></object>
    </div>

    <!-- Conteneur principal -->
    <div id="app-container">
        <!-- Colonne gauche : Menu et Infos utilisateur -->
        <div id="left-panel">
            <div id="main-menu">
                <h1>Dr Santé</h1>
                <button id="login-btn" onclick="showLogin()">Se connecter</button>
                <div id="nav-buttons" style="display:none;">
                    <button id="consult-btn" onclick="showConsultation()">Nouvelle consultation</button>
                    <button id="history-btn" onclick="showHistory()">Mes consultations</button>
                    <button id="tips-btn" onclick="showTips()">Conseils santé</button>
                    <button id="appointment-btn" onclick="showAppointment()">Planifier un RDV</button>
                    <button id="upcoming-btn" onclick="showUpcomingAppointments()">Mes RDV à venir</button>
                    <button id="logout-btn" onclick="logout()">Se déconnecter</button>
                </div>
            </div>
            <div id="user-info" style="display:none;">
                <h2>Mon Profil</h2>
                <p><strong>Nom :</strong> <span id="user-fullname"></span></p>
                <p><strong>Email :</strong> <span id="user-email"></span></p>
                <p><strong>Rôle :</strong> <span id="user-role"></span></p>
            </div>
        </div>

        <!-- Colonne centrale : Vidéo -->
        <div id="video-panel">
            <h2>Dr Santé Live</h2>
            <iframe width="768" height="576" 
                src="https://www.youtube.com/embed/l8PMl7tUDIE?si=uHZxjwGFcH9eZTG7" 
                title="YouTube video player" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                referrerpolicy="strict-origin-when-cross-origin" 
                allowfullscreen>
            </iframe>
        </div>

        <!-- Colonne droite : Contenu dynamique -->
        <div id="right-panel">
            <!-- Formulaire de connexion -->
            <div id="login-form" style="display:none;">
                <h2>Connexion</h2>
                <input type="email" id="email-input" placeholder="Email" tabindex="0" />
                <input type="password" id="password-input" placeholder="Mot de passe" tabindex="0" />
                <button onclick="submitLogin()" tabindex="0">Se connecter</button>
                <button onclick="hideLogin()" tabindex="0">Retour</button>
            </div>

            <!-- Formulaire de consultation -->
            <div id="consultation-form" style="display:none;">
                <h2>Nouvelle Consultation</h2>
                <textarea id="symptoms-input" placeholder="Décrivez vos symptômes..." tabindex="0"></textarea>
                <button onclick="submitConsultation()" tabindex="0">Envoyer</button>
                <button onclick="hideConsultation()" tabindex="0">Retour</button>
            </div>

            <!-- Historique des consultations -->
            <div id="history-view" style="display:none;">
                <h2>Mes Consultations</h2>
                <div id="history-content"></div>
                <button onclick="hideHistory()" tabindex="0">Retour</button>
            </div>

            <!-- Conseils de santé -->
            <div id="tips-view" style="display:none;">
                <h2>Conseils Santé</h2>
                <p id="tips-content"></p>
                <button onclick="hideTips()" tabindex="0">Retour</button>
            </div>

            <!-- Formulaire de planification de rendez-vous -->
            <div id="appointment-form" style="display:none;">
                <h2>Planifier un Rendez-vous</h2>
                <select id="doctor-select" tabindex="0">
                    <option value="">Choisir un médecin</option>
                </select>
                <input type="datetime-local" id="appointment-date" tabindex="0" />
                <button onclick="submitAppointment()" tabindex="0">Planifier</button>
                <button onclick="hideAppointment()" tabindex="0">Retour</button>
            </div>

            <!-- Liste des rendez-vous à venir -->
            <div id="upcoming-appointments" style="display:none;">
                <h2>Mes RDV à venir</h2>
                <div id="appointments-content"></div>
                <button onclick="hideUpcomingAppointments()" tabindex="0">Retour</button>
            </div>

            <!-- Message de bienvenue par défaut -->
            <div id="welcome-message">
                <h2>Bienvenue sur Dr Santé</h2>
                <p>Connectez-vous pour accéder à vos services de téléconsultation.</p>
            </div>
        </div>
    </div>
</body>
</html>